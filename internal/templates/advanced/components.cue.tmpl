// Components composes the component templates from the components/ subpackage.
package main

import (
	comps "{{.ModulePath}}@v0/components"
)

// _components extends the component templates with module-specific configuration.
#components: {
	// Web frontend using the web component template
	web: comps.#web & {
		spec: {
			container: image: #config.web.image
			replicas: #config.web.replicas
		}
	}

	// API backend using the api component template
	api: comps.#api & {
		spec: {
			container: image: #config.api.image
			replicas: #config.api.replicas
		}
	}

	// Background worker using the worker component template
	worker: comps.#worker & {
		spec: {
			container: image: #config.worker.image
			replicas: #config.worker.replicas
		}
	}

	// Database using the db component template
	db: comps.#db & {
		spec: {
			container: image: #config.db.image
			storage: size: #config.db.storageSize
		}
	}
}
