// Web component template for frontend services.
package components

import (
	resources_workload "opmodel.dev/resources/workload@v0"
	traits_workload "opmodel.dev/traits/workload@v0"
	traits_network "opmodel.dev/traits/network@v0"
)

// _web is a reusable web server component template.
#web: {
	resources_workload.#Container
	traits_workload.#Replicas
	traits_network.#Expose

	spec: {
		container: {
			image: string
			ports: http: {
				targetPort: 8080
			}
			resources: {
				requests: {
					cpu:    "100m"
					memory: "128Mi"
				}
				limits: {
					cpu:    "500m"
					memory: "512Mi"
				}
			}
		}
		replicas: int | *2
		expose: {
			ports: http: container.ports.http & {
				exposedPort: 8080
			}
			type: "ClusterIP"
		}
	}
}
