// Package main defines the {{.ModuleName}} module.
// This is an advanced multi-package module with:
// - module.cue: metadata and schema
// - components.cue: component composition
// - scopes.cue: scope definitions
// - values.cue: default values
// - components/: component templates (subpackage)
package main

import "opmodel.dev/core@v0"

// Module definition
core.#Module

// Module metadata
metadata: {
	apiVersion:  "{{.ModulePath}}@v0"
	name:        "{{.ModuleNamePascal}}"
	version:     "{{.Version}}"
	description: string | *"An advanced OPM module with multi-package architecture"
	defaultNamespace: "default"
}

// Components are defined in components.cue

// #values defines the configuration schema for this module.
#values: {
	// Web frontend configuration
	web: {
		image!:    string
		replicas?: int & >=1 | *2
		port?:     int & >0 & <=65535 | *8080
	}

	// API backend configuration
	api: {
		image!:    string
		replicas?: int & >=1 | *3
		port?:     int & >0 & <=65535 | *3000
	}

	// Worker configuration
	worker: {
		image!:    string
		replicas?: int & >=1 | *2
	}

	// Database configuration
	db: {
		image!:       string
		storageSize?: string | *"10Gi"
		port?:        int & >0 & <=65535 | *5432
	}
}
