// Package main defines the {{.ModuleName}} module.
// This is a standard module with separated concerns:
// - module.cue: metadata and schema
// - components.cue: component definitions
// - values.cue: default values
package main

import (
	"opmodel.dev/core@v0"
)

// Module definition
core.#Module

// Module metadata
metadata: {
	apiVersion:  "{{.ModulePath}}@v0"
	name:        "{{.ModuleNamePascal}}"
	version:     "{{.Version}}"
	description: string | *"A standard OPM module"
	defaultNamespace: "default"
}

// Components are defined in components.cue

// Schema and default values are defined in values.cue
#config: {
	// Web component configuration
	web: {
		// Container image (required)
		image!: string

		// Number of replicas
		replicas?: int & >=1

		// Port to expose
		port?: int & >0 & <=65535
	}

	// API component configuration
	api: {
		// Container image (required)
		image!: string

		// Number of replicas
		replicas?: int & >=1

		// Port to expose
		port?: int & >0 & <=65535
	}
}
